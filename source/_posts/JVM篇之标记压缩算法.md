---
title: JVM篇之标记压缩算法
date: 2020-12-30 20:06:38
categories: JVM
tags: 垃圾回收算法
---

##  标记-压缩算法

###  背景

复制算法的高效是建立在存活对象少的、垃圾对象多的前提下。这种情况在新生代经常发生，但是在老年代，更常见的情况大部分对象都是存活对象，如果采用复制算法，由于存活对象多，复制成本也很高，因此老年代垃圾回收特征，需要使用其他算法。

###  执行过程

- 第一阶段和标记清除一样，从根节点开始标记所有被引用对象。
- 第二阶段将所有存活的对象压缩到内存的一段，按顺序排放。
- 之后清理边界外所有空间。

##  内存图示

<img src="https://img-blog.csdnimg.cn/20200729101847716.png" alt="img" style="zoom:80%;" />

##  缺点

- 从效率来看，标记-整理算法要低于复制算法
- 移动对象的同时，如果对象被其它对象引用，则需要调整引用地址
- 移动过程中需要全程暂停用户应用，即STW。